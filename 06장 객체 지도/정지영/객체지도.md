# 6장 객체지도

```
소프트웨어 개발의 가장 큰 적은 변경이며 변경은 항상 발생한다는 사실을 기억하라.
```

## 기능 설계 대 구조 설계
- 기능이 아니라 구조를 기반으로 모델을 구축하는 편이 좀 더 범용적이고 이해하기 쉬우며 변경에 안정적이다
- 유지하기 쉬운 설계는 사용자의 변하는 요구사항을 반영할 수 있도록 쉽게 확장가능한 소프트웨어를 창조할 수 있는 기반이 된다.
- 객체지향은 객체의 구조에 집중하고 기능이 객체의 구조를 따르게 만든다. 시스템 기능은 더 작은 책임으로 분할되고 적절한 객체에게 분배되기 때문에 기능이 변경되더라도 객체 간의 구조는 그대로 유지된다.

## 두 가지 재료: 기능과 구조
- 구조는 사용자나 이해관계자들이 도메인에 관해 생각하는 개념과 개념들 간의 관계로 표현한다.
- 기능은 사용자의 목표를 만족시키기 위해 책임을 수행하는 행위로 표현한다.
- 유스케이스 모델링: 기능을 수집하고 표현하기 위한 기법
- 도메인 모델링: 구조를 수집하고 표현하기 위한 기법

## 안정적인 재료: 구조
### 도메인 모델
- 도메인: 사용자가 프로그램을 사용하는 대상 분야
- 모델: 중요한 문제에 집중할 수 있도록 필요한 지식만 재구성한 것. 즉, 대상을 추상화하고 단순화 한 것
- 도메인 모델: 사용자가 프로그램을 사용하는 대상 영역에 / 관한 지식을 선택적으로 단순화하고 의식적으로 구조화한 형태
- 멘탈 모델: 사람들이 자기 자신, 다른사람, 환경, 자신이 상호작용하는 사물들에 대해 갖는 모형.
- 도메인 모델은 이래관계자들이 바라보는 멘탈모델

### 도메인의 모습을 담을 수 있는 객체지향
- 객체지향 패러다임은 사용자의 관점, 설계자의 관점, 코드의 모습을 모두 유사한 형태로 유지할 수 있게 하는 유용한 사고 도구와 프로그래밍 기법을 제공한다.

- 객체지향을 이용하면 도메인에 대한 사용자 모델, 디자인 모델, 시스템 이미지 모두가 유사한 모습을 유지하도록 만드는 것이 가능하다.

- 객체지향의 특징: 연결완전성 or 표현적 차이
- 연결완전성: 도메인 모델링에서 사용한 객체와 개념을 프로그래밍 설계에서의 객체와 클래스로 매끄럽게 변환할 수 있는 것

### 표현적 차이
- 소프트웨어 객체와 현실 객체 사이의 의미적 거리를 가리켜 표현적 차이 또는 의미적 차이

- 표현적 차이는 소프트웨어를 이해하고 수정하기 쉽게 만들어준다.

### 불안정한 기능을 담는 안정적인 도메인 모델
- 도메인 모델이 제공하는 구조가 상대적으로 안정적이다.
- 도메인모델의 핵심은 사용자가 도메인을 바라보는 관점을 반영해 소프트웨어를 설계하고 구현하는 것이다.

## 불안정한 재료: 기능
### 유스케이스
- 사용자는 시스템의 응답을 기반으로 또 다른 작업을 요청하고 시스템은 요청을 다시 처리한 후 사용자에게 응답한다.
- 유스케이스는 시스템의 이해관계자들 간의 계약을 행위 중심으로 파악한다.
- 사용자 목표가 유스케이스의 핵심이다.
- 유스케이스는 공통의 사용자 목표를 통해 강하게 연관된 시나리오의 집합니다.

### 유스케이스의 특성
1. 사용자와 시스템 간의 상호작용을 보여주는 '텍스트'다.
- 사용자와 시스템 간의 상호작용을 일련의 이야기 흐름으로 표현하는 것.
2. 여러 시나리오의 집합니다.
- 유스케이스는 이자액 계산이라는 사용자의 목표와 관련된 모든 시나리오의 집합니다.
- 유스케이스 인스턴스: 시나리오
3. 유스케이스는 단순한 피처(Feature) 목록과 다르다.
- 피처(Feature): 시스템이 수행해야하는 기능의 목록을 나열한 것
- 유스케이스가 단순히 기능을 나열하는 것이 아니라 이야기를 통해 연관된 기능들을 함께 묶을 수 있다는 점
4. 사용자 인터페이스와 관련된 세부 정보를 포함하지 말아야한다.
- 사용자 관점에서 **시스템의 행위**에 초점을 맞춘다.
5. 내부 설계와 관련된 정보를 포함하지 않는다.
- 연관된 시스템의 기능을 이야기 형식으로 모으는 것이지 내부 설계를 설명하는 것이 아니다.

### 유스케이스는 설계 기법도, 객체지향 기법도 아니다
- 유스케이스는 단지 기능적 요구사항을 사용자의 목표라는 문맥을 중심으로 묶기 위한 정리 기법일 뿐이다.

## 재료합치기: 기능과 구조의 통합
### 도메인 모델, 유스케이스, 그리고 책임-주도 설계
- 도메인 모델은 안정적인 구조를 개념화하기 위해, 유스케이스는 불안정한 기능을 서술하기 위해 가장 일반적으로 사용되는 도구
- 유스케이스에 정리된 시스템의 기능을 도메인 모델을 기반으로 한 객체들의 책임으로 분배해야 한다.
- 도메인 모델은 구조를 유스케이스는 협력의 출발점인 시스템 책임을 제공한다.

```
객체지향 설계는 요구사항들을 식별하고 도메인 모델을 생성한 후 소프트웨어 클래스에 메서드들을 추가하고, 요구사항을 충족시키기 위해 객체들 간의 메시지 전송을 정의하라.
```

- 견고한 객체지향 어플리케이션을 개발하기 위해서는 사용자의 관점에서 시스템의 기능을 명시하고, 사용자와 설계자가 공유하는 안정적인 구조를 기반으로 기능을 책임으로 변환하는 체계적인 절차를 따라야 한다는 것이다.
- 도메인 모델의 속성을 클래스의 인스턴스 변수로, 협력 안에서의 책임을 클래스의 메서드로 변환한다.

### 기능 변경을 흡수하는 안정적인 구조
- 도메인 모델을 구성하는 개념 간의 관계는 비지니스 규칙을 기반으로 하기 때문에 비지니스 정책이 크게 변경되지 않는 한 안정적으로 유지된다.
- 기능적인 요구사항이 변경될 경우 책임과 객체 간의 대응 관계만 수정될 뿐이다.
- 연결완전성과 반대로 코드에서 모델로의 매끄러운 흐름을 의미하는 것을 가역성이라고 한다.
- 도메인 모델은 사람들의 머릿속에 들어있는 공유된 멘탈 모델이다.
- 안정적인 도메인 모델을 기반으로 시스템의 기능을 구현한다.